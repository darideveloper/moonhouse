---
import clsx from 'clsx'

// Props
interface Props {
  name?: string
  description?: string
  price?: number
  image?: {
    src: string
    alt: string
  }
  variants?: {
    details: string
    price: number
  }[]
  class?: string
}

const {
  name = 'Default Item',
  description = 'Default description for the menu item.',
  price = 0,
  image = { src: '/images/durazno.webp', alt: 'Default menu item image' },
  variants = [],
  class: className,
} = Astro.props

const imageStyles = [
  'w-20',
  'h-20',
  'rounded-full',
  'object-cover',
  'flex-shrink-0',
]
---

<article class:list={['flex w-full items-center gap-4 py-4', className]}>
  <img
    src={image.src}
    alt={image.alt}
    class:list={imageStyles}
    title={image.alt}
  />

  <div class:list={['flex w-full flex-col']}>
    <h4
      class:list={[
        'text-base md:text-xl',
        '!font-light',
        'text-brand-black',
        'mb-0',
      ]}
    >
      {name}
    </h4>

    <div class:list={['flex w-full items-baseline gap-4']}>
      <p class:list={['text-sm text-gray-500', 'mb-0']}>{description}</p>

      <div
        class:list={[
          'flex-grow',
          'border-b-3',
          'border-dotted',
          'border-gray-300',
        ]}
      >
      </div>
      <!-- Show price only if no variants and price no 0  -->
      {
        variants.length === 0 && price > 0 && (
          <span
            class:list={['text-xl font-bold text-brand-black whitespace-nowrap']}
          >
            $ {price}
          </span>
        )
      }
    </div>

    {/* Render each menu variant, also with dots between them */}
    <div class:list={['flex flex-col gap-2']}>
      {
        variants.map((variant, index) => (
          <div class={clsx('flex', 'items-center', 'gap-2')}>
            {/* Variant name */}
            <span class:list={['text-sm text-gray-500', 'mb-0']}>
              {variant.details}
            </span>
            {/* Dots separator */}
            <div
              class:list={[
                'flex-grow',
                'border-b-3',
                'border-dotted',
                'border-gray-300',
              ]}
            />
            {/* Price */}
            {variant.price > 0 && (
              <span class:list={['text-sm text-gray-500', 'mb-0']}>
                $ {variant.price}
              </span>
            )}
          </div>
        ))
      }
    </div>
  </div>
</article>
