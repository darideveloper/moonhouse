---
// DARIDEV: organize imports

// Components
import AboutCard from '../ui/AboutCard.astro'
import CardInfo from '../ui/CardInfo.astro'
import Schedule from '../ui/Schedule.astro'

// Icons
import { IoLocationOutline, IoReceiptOutline } from 'react-icons/io5'
import { IoTimeOutline } from 'react-icons/io5'
import { IoCalendarOutline } from 'react-icons/io5'

// Libs
import { getInfoCards } from '../../lib/api/infoCards'

// Icon mapping
const iconMap: Record<string, any> = {
  location: IoLocationOutline,
  time: IoTimeOutline,
  clock: IoTimeOutline,
  calendar: IoCalendarOutline,
  reservations: IoCalendarOutline,
  invoice: IoReceiptOutline,
}

// Card data interface
interface CardData {
  iconName: string
  title: string
  description: string
  link: string
}

// JSON data to display on the page
const cardData: CardData[] = await getInfoCards()
---

<section
  class:list={['bg-black', 'py-20', 'w-full']}
  id='about'
>
  <div class:list={['max-w-7xl', 'container']}>
    <!-- Top Info Cards -->
    <div
      class:list={[
        'flex',
        'flex-col lg:flex-row',
        'justify-center lg:justify-between',
        'gap-12',
        'mb-20',
      ]}
    >
      {
        cardData.map((card) => (
          <AboutCard
            icon={iconMap[card.iconName]}
            title={card.title}
            link={card.link}
          >
            {
              // Synamic render schedules or text
              card.description === '{{schedule}}' ? (
                <Schedule />
              ) : (
                <p class:list={['text-gray-300', 'leading-relaxed', 'mb-2']}>
                  {card.description}
                </p>
              )
            }
          </AboutCard>
        ))
      }
    </div>

    <CardInfo />
  </div>
</section>
