---
// Reas props
interface Props {
  currentPage: string; // Current page
}
const { currentPage } = Astro.props as Props;

// Components
import BaseSEO from "./base/BaseSEO.astro";

// Data
import { domain } from "../../data/setup";
import { phoneUnformatted, addressElems } from "../../data/contact";
import { servicesData } from "../../data/servcies";
import { getOpeningHours } from "../../lib/api/schedule";
import {
  convertToOpeningHours,
  convertToOpeningHoursSpecification,
} from "../../lib/utils/formatschedule";

const hoursData = await getOpeningHours();

/**
 * hours format:
  openingHours: ["Mo-Fr 10:00-20:00", "Sa 11:00-17:00"],
  openingHoursSpecification: [
    {
      "@type": "OpeningHoursSpecification",
      dayOfWeek: ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday"],
      opens: "10:00",
      closes: "20:00",
    },
    {
      "@type": "OpeningHoursSpecification",
      dayOfWeek: "Saturday",
      opens: "11:00",
      closes: "17:00",
    },
  ],
 */

const openingHours: string[] = convertToOpeningHours(hoursData);
const openingHoursSpecification: {
  "@type": string;
  dayOfWeek: string[];
  opens: string;
  closes: string;
}[] = convertToOpeningHoursSpecification(hoursData);

// Extra JSON
const extraJson = {
  // Price
  priceRange: "$",

  // Contact
  telephone: phoneUnformatted,

  // Hours
  openingHours: openingHours,
  openingHoursSpecification: openingHoursSpecification,

  // Services
  makesOffer: [
    ...Object.keys(servicesData).map((serviceKey) => ({
      "@type": "Offer",
      name: servicesData[serviceKey].name?.replaceAll("*", ""),
      description: servicesData[serviceKey].description?.replaceAll("*", ""),
      url: `${domain}#service-${serviceKey.toLowerCase()}`,
    })),
  ],

  // Founder
  foundingDate: "2022",
  founder: {
    "@type": "Person",
    name: "Moonhouse Coffee Bar & Bistro",
  },

  // rating
  aggregateRating: {
    "@type": "AggregateRating",
    ratingValue: "4.9",
    reviewCount: "27",
  },

  // Location
  address: {
    "@type": "PostalAddress",
    ...addressElems,
  },
  geo: {
    "@type": "GeoCoordinates",
    latitude: 20.9984621,
    longitude: -89.6152096,
  },
};
---

<BaseSEO
  currentPage={currentPage}
  jsonType="LocalBusiness"
  extraJson={extraJson}
  baseDescription="Indulge in authentic bistro cuisine at Moonhouse Coffee Bar & Bistro in Fayetteville, Arkansas. Enjoy our menu of starters, main dishes, and desserts, including options like Raw Scallops, Grilled Salmon, and Lemon Meringue Pie. Savor a coffee, wine, or cocktail in our charming, historic space. Visit Moonhouse for a meal and a story."
  baseKeywords="Moonhouse Coffee Bar Bistro, Fayetteville Arkansas, coffee bar, bistro, restaurant, starters, main dishes, dessert, Raw Scallops, Spring Roll, French Onion Soup, Tomato Bruschetta, Grilled Salmon, Roast Beef, Marrkesh Vegetarian Curry, Spicy Vegan Potato Curry, Apple Pie, Lemon Meringue Pie, coffee, wine, cocktails"
/>
